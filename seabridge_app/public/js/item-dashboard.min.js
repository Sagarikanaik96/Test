!function(){"use strict";
console.log("In other dashboard------------")
frappe.templates.item_dashboard='<div>  <div class="result">  </div>  <div class="more hidden" style="padding: 15px;">   <a class="btn btn-default btn-xs btn-more">More</a>  </div> </div>',frappe.templates.item_dashboard_list='<style>input{border: none;background: transparent;}.button-sbt {background-color: #008CBA;}.button-apr {background-color: #4CAF50;}.button {border: none; color: white; padding: 6px 6px;text-align: center;font-size: 10px;margin: 2px 2px;}div.b {word-wrap: break-word;}</style><div class="dashboard-list-item">   <div class="row"><div class="col-sm-1 small" style="margin-top: 8px;"><center><input type="checkbox" id="vehicle1" name="chcb1" value="Bike"></center></div><div class="col-sm-2 small" style="margin-top: 8px;margin-left:-20px;"><b>Vendor</b></div><div class="col-sm-1 small" style="margin-top: 8px;margin-left:-20px;"><b>Inv#</b></div> <div class="col-sm-1 small" style="margin-top: 8px;text-align:right;margin-left:30px;"><b>PO$ </b> </div>  <div class="col-sm-1 small" style="margin-top: 8px;text-align:right;"><b>Inv$</b></div><div class="col-sm-1 small" style="margin-top: 8px;text-align:right;"><b> Budget </b></div><div class="col-sm-1 small" style="margin-top: 8px;">  <b>PO Date</b>  </div><div class="col-sm-1 small" style="margin-top: 8px;"> <b> Invoice Date </b> </div><div class="col-sm-1 small" style="margin-top: 8px;"> <a data-type="match"> <b> Match ? </b></a></div><div class="col-sm-1 small" style="margin-top: 8px;">  <b>Pending With  </b></div><div class="col-sm-1 small" style="margin-top: 8px;"><b>Status</b></div>   </div></div>{% for d in data %}  <div class="dashboard-list-item">   <div class="row"> <div class="col-sm-1 small" style="margin-top: 8px;"><center>{%if (((d[4]=="Draft")||(d[4]=="Rejected"))&&(d[10]=="1"||d[10]=="3"))%}<input type="checkbox" id="chcb2" name="chcb2" value="Bike" class="btn-check">{%else%}{%if ((d[4]=="Pending")&&(d[10]=="2"||d[10]=="3"))%}<input type="checkbox" id="chcb2" name="chcb2" value="Bike" class="btn-check">{%else%}<input type="checkbox" id="chcb2" name="chcb2" value="Bike" class="btn-check" disabled>{%endif%}{%endif%}</center></div>  <div class="b">  <div class="col-sm-2 small" style="margin-top: 8px;margin-left:-20px;">     <a data-type="supplier" data-name="{{ d.supplier }}">{{ d[1] }}</a>   </div> </div>  <div class="b">  <div class="col-sm-1 small" style="margin-top: 8px;margin-left:-20px;">          <a data-type="purchase_invoice"       data-name="{{ d.name }}" href="/desk#Form/Purchase%20Invoice/{{ d[0] }}"><div class="b"> <u><input type="text" id="inv" name="inv" value={{ d[0] }} style="color:blue;"></u></div></a>      </div></div> <div class="b"> <div class="col-sm-1 small" style="margin-top: 8px;text-align:right;margin-left:30px;" id="inv" word-wrap: break-word;>  {{ d[5] }}  </div> </div>  <div class="b">  <div class="col-sm-1 small" style="margin-top: 8px;text-align:right;"> {{ d[2]}} </div>  </div> <div class="b"> <div class="col-sm-1 small" style="margin-top: 8px;text-align:right;">  {{ d[9] }}  </div></div><div class="b"><div class="col-sm-1 small" style="margin-top: 8px;">  {{d[6]}}  </div> </div><div class="b"><div class="col-sm-1 small" style="margin-top: 8px;">  {{ d[3] }}  </div></div><div class="col-sm-1 small" style="margin-top: 8px;">  <a data-type="match">{%if d[7]==1%}Y{%else%}N{%endif%} </a> </div> <div class="b"><div class="col-sm-1 small" style="margin-top: 8px;">  {{ d[8] }}  </div></div><div class="b"><div class="col-sm-1" style="margin-top: 8px;text-align:left;"> </a>         {%if (d[4]=="To Pay")%} <button  class="btn btn-default btn-xs btn-add btn-success">{{d[4]}} </button>{%else%}{%if (d[4]=="Rejected")%} <button  class="btn btn-default btn-xs btn-add btn-danger">{{d[4]}} </button>{%else%}{%if (d[4]=="Draft")%} <button  class="btn btn-default btn-xs btn-add btn-info">{{d[4]}} </button>{%else%}<button  class="btn btn-default btn-xs btn-add btn-warning">{{d[4]}}</button> {%endif%} {%endif%} {%endif%}</div></div>    </div>  </div> {% endfor %} <center><table><tr>{%if (d[10]=="1"||d[10]=="3")%}<td><div class="submit"><button  class="btn btn-default btn-xs btn-submit  button-sbt button">Submit</a>    </div></td>{%endif%}{%if (d[10]=="2"||d[10]=="3")%}<td><div>&nbsp;<button  class="btn btn-default btn-xs btn-approve button-apr button">Approve</a>    </div></td><td><div>&nbsp;<button  class="btn btn-default btn-xs btn-reject button btn-danger">Reject</a>    </div></td>{%endif%}</tr></center>',
erpnext.stock.ItemDashboard=Class.extend({
    init:function(e){
        $.extend(this,e),this.make()
    },
make:function(){
var e=this;
function t(t,a){
}
	this.start=0,
	this.sort_by||(this.sort_by="projected_qty",this.sort_order="asc"),
	this.content=$(frappe.render_template("item_dashboard")).appendTo(this.parent),this.result=this.content.find(".result"),
	this.content.on("click",".btn-move",function(){t($(this),"Move")}),
	this.content.on("click",".btn-add",function(){t($(this),"Add")}),
	this.content.on("click",".btn-submit",function(){
		var allCB = document.querySelectorAll("input[id='chcb2']");
		var allInv = document.querySelectorAll("input[id='inv']");
		for(var i=0; i< allInv.length; i++){
			console.log(t[0])
			if(allCB[i].checked==true){
				frappe.call({method:"seabridge_app.seabridge_app.api.web_form",
			    	    args:
			    	    {doc:allInv[i].value,
			    	   },
			    	    callback:function(r){
					console.log(r.message)
			    	       
			    	    }
				})
			}
			
		    }
		window.location.reload();

	}),
	this.content.on("click",".btn-approve",function(){
		var allCB = document.querySelectorAll("input[id='chcb2']");
		var allInv = document.querySelectorAll("input[id='inv']");
		for(var i=0; i< allInv.length; i++){
			if(allCB[i].checked==true){
				frappe.call({method:"seabridge_app.seabridge_app.api.approve_invoice",
			    	    args:
			    	    {doc:allInv[i].value,
			    	   },
			    	    callback:function(r){
					console.log(r.message)
			    	       
			    	    }
				})
			}
			
		    }
		window.location.reload();

	}),
	this.content.on("click",".btn-reject",function(){
		var allCB = document.querySelectorAll("input[id='chcb2']");
		var allInv = document.querySelectorAll("input[id='inv']");
		for(var i=0; i< allInv.length; i++){
			console.log(t[0])
			if(allCB[i].checked==true){
				frappe.call({method:"seabridge_app.seabridge_app.api.reject_invoice",
			    	    args:
			    	    {doc:allInv[i].value,
			    	   },
			    	    callback:function(r){
					console.log(r.message)
			    	       
			    	    }
				})
			}
			
		    }
		window.location.reload();

	}),
	this.content.on("click",".btn-check",function(){
		var allCB = document.querySelectorAll("input[id='chcb2']");
		if(allCB.length>0){
			console.log("greater------------")
			//var x = document.getElementById("myDIV");
			//x.style.display = "block";
			this.content.find(".submit").addClass("hidden")
			  //document.getElementById("btn-sbt").style.visibility = "visible";
		
		}
		console.log("On Check")
	}),
	this.content.find(".btn-more").on("click",function(){
	    e.start+=20,e.refresh()
	})
},
	refresh:function(){
	    this.before_refresh&&this.before_refresh();
	    var e=this;
	    frappe.call({method:"seabridge_app.seabridge_app.api.get_data",
    	    args:
    	    {name:this.purchase_invoice,
    	    supplier:this.supplier,
    	    match:this.match,
    	    start:this.start,
    	    sort_by:this.sort_by,
    	    sort_order:this.sort_order},
    	    callback:function(t){
		console.log(t.message)
    	        e.render(t.message)
    	    }
	    })
	},
	render:function(e){
	    0===this.start&&(this.max_count=0,this.result.empty());
	    var t=this.get_item_dashboard_data(e,this.max_count,!0);
	    if(this.max_count=this.max_count,e&&21===e.length?(this.content.find(".more").removeClass("hidden"),e.splice(-1)):this.content.find(".more").addClass("hidden"),t.data.length>0)
	    $(frappe.render_template("item_dashboard_list",t)).appendTo(this.result);
	    else{
	        var a=__("Currently no stock available in any warehouse");
	        $("<span class='text-muted small'>  "+a+" </span>").appendTo(this.result)}},
	        get_item_dashboard_data:function(e,t,a){
	            t||(t=0),e||(e=[]),
	            e.forEach(function(e){
	                e.actual_or_pending=e.projected_qty+e.reserved_qty+e.reserved_qty_for_production+e.reserved_qty_for_sub_contract,
	                e.pending_qty=0,
	                e.total_reserved=e.reserved_qty+e.reserved_qty_for_production+e.reserved_qty_for_sub_contract,
	                e.actual_or_pending>e.actual_qty&&(e.pending_qty=e.actual_or_pending-e.actual_qty),
	                t=Math.max(e.actual_or_pending,e.actual_qty,e.total_reserved,t)
	                
	            });
	            var r=0;
	            return frappe.boot.user.can_write.indexOf("Stock Entry")>=0&&(r=1),{
	                data:e,max_count:t,can_write:r,show_item:a||!1}
	            
	        }
}),
	                erpnext.stock.move_item=function(e,t,a,r,n,s){
	                    var i=new frappe.ui.Dialog({title:a?__("Add Item"):__("Move Item"),
	                    fields:[{fieldname:"item_code",label:__("Item"),fieldtype:"Link",options:"Item",read_only:1},
	                    {fieldname:"source",label:__("Source Warehouse"),fieldtype:"Link",options:"Warehouse",read_only:1},
	                    {fieldname:"target",label:__("Target Warehouse"),fieldtype:"Link",options:"Warehouse",reqd:1},
	                    {fieldname:"qty",label:__("Quantity"),reqd:1,fieldtype:"Float",description:__("Available {0}",[r])},
	                    {fieldname:"rate",label:__("Rate"),fieldtype:"Currency",hidden:1}]});
	                    i.show(),i.get_field("item_code").set_input(e),t?i.get_field("source").set_input(t):(i.get_field("source").df.hidden=1,i.get_field("source").refresh()),
	                    n&&(i.get_field("rate").set_value(n),i.get_field("rate").df.hidden=0,i.get_field("rate").refresh()),
	                    a&&(i.get_field("target").df.read_only=1,i.get_field("target").value=a,
	                    i.get_field("target").refresh()),
	                    i.set_primary_action(__("Submit"),
	                    function(){
	                        var e=i   .get_values();
	                        e&&(t&&e.qty>r?frappe.msgprint(__("Quantity must be less than or equal to {0}",[r])):(e.source===e.target&&frappe.msgprint(__("Source and target warehouse must be different")),
	                        frappe.call({method:"erpnext.stock.doctype.stock_entry.stock_entry_utils.make_stock_entry",args:e,freeze:!0,
	                        callback:function(e){
	                            frappe.show_alert(__("Stock Entry {0} created",['<a href="#Form/Stock Entry/'+e.message.name+'">'+e.message.name+"</a>"])),
	                            i.hide(),s(e)}})))}),$('<p style="margin-left: 10px;"><a class="link-open text-muted small">'+__("Add more items or open full form")+"</a></p>").appendTo(i.body).find(".link-open").on("click",function(){
	                                frappe.model.with_doctype("Stock Entry",function(){
	                                    var e=frappe.model.get_new_doc("Stock Entry");
	                                    e.from_warehouse=i.get_value("source"),
					    e.to_warehouse=i.get_value("target");
	                                    var t=frappe.model.add_child(e,"items");
	                                    t.item_code=i.get_value("item_code"),
	                                    t.f_warehouse=i.get_value("target"),
	                                    t.t_warehouse=i.get_value("target"),
	                                    t.qty=i.get_value("qty"),t.conversion_factor=1,
	                                    t.transfer_qty=i.get_value("qty"),
	                                    t.basic_rate=i.get_value("rate"),
	                                    frappe.set_route("Form",e.doctype,e.name)
	                                })
	                            })
	                }}();



//# sourceMappingURL=item-dashboard.min.js.map
